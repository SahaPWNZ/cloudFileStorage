<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <title>Welcome</title>
    <link rel="stylesheet" th:href="@{/home.css}"/>
</head>
<body>
<h2 th:text="'Приветствуем вас пользователь с логином: ' + ${login}"></h2>
<br>
<a href="/logout" class="button">Логаут</a>
<br>
<br>
<h1 th:text="'Рабочая зона хранилища'"></h1>
<div th:if="${allPath == null || #lists.isEmpty(allPath)}">
    <p>Нет директорий и файлов!</p>
</div>
<div th:if="${allPath != null || !#lists.isEmpty(allPath)}">
    <div th:each="path : ${allPath}">
        <h3 th:text="${path}"></h3>
        <div th:if="${path.endsWith('/')}">
            <form action=# method="get" th:action="@{/}">
                <input type="hidden" name="path" th:value="${path.substring(0, path.length()-1)}"/>
                <button type="submit">Перейти в папку</button>
            </form>
        </div>
        <div th:if="${!path.endsWith('/')}">
            <form action="#" method="post" th:action="@{/delete-file}">
                <input type="hidden" name="path" th:value="${path}"/>
                <input type="hidden" name="prefix" th:value="${prefix}"/>
                <button type="submit">Удалить файл</button>
            </form>
        </div>
    </div>
</div>

<form action="#" th:action="@{/load}" method="post" enctype="multipart/form-data">
    <div class="drop-zone">
        <span class="drop-zone__prompt">Drop file here or click to upload</span>
        <input type="file" name="myFile" class="drop-zone__input">
        <input type="hidden" name="prefix" th:value="${prefix}"/>
    </div>
    <br><br>
    <button type="submit">Загрузить</button>
</form>
<h3>Загрузка папок</h3>
<form action="#" th:action="@{/loadFolder}" method="post" enctype="multipart/form-data">
    <div class="drop-zone">
        <span class="drop-zone__prompt">Drop file here or click to upload</span>
        <input type="file" name="myFolder" webkitdirectory multiple>
    </div>
    <br><br>
    <button type="submit">Загрузить</button>
</form>

<script th:src="@{/home.js}"></script>
</body>
</html>